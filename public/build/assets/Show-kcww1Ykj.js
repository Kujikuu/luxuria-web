import{r as b,c as N,j as e,f as _,b as w,u as k,H as S}from"./app-BJ0wERGA.js";import{T as D,B as q}from"./Button-BKMLAeZw.js";import{T as c,A as U,N as L}from"./app-layout-wUNoF8RP.js";import{r as T,a as $}from"./Star.es-s_zLKmfA.js";/* empty css            */const I=()=>{const[t,x]=b.useState(!1),[s,l]=b.useState(null);b.useEffect(()=>{u()},[]);const u=()=>{try{const n=localStorage.getItem("luxuria_properties_unlocked");if(n){const i=JSON.parse(n),m=new Date(i.timestamp);Math.floor((new Date().getTime()-m.getTime())/(1e3*60*60*24))<=30?(x(!0),l(i)):(localStorage.removeItem("luxuria_properties_unlocked"),x(!1),l(null))}}catch(n){console.error("Error checking unlock status:",n),localStorage.removeItem("luxuria_properties_unlocked"),x(!1),l(null)}};return{isUnlocked:t,unlockData:s,saveUnlockStatus:(n,i)=>{const m={unlocked:!0,timestamp:new Date().toISOString(),user:{name:n.name,phone:n.phone,email:n.email||null},property_id:i};try{return localStorage.setItem("luxuria_properties_unlocked",JSON.stringify(m)),x(!0),l(m),!0}catch(g){return console.error("Error saving unlock status:",g),!1}},clearUnlockStatus:()=>{try{localStorage.removeItem("luxuria_properties_unlocked"),x(!1),l(null)}catch(n){console.error("Error clearing unlock status:",n)}},checkUnlockStatus:u,getRemainingDays:()=>{if(!s)return 0;const n=new Date(s.timestamp),m=Math.floor((new Date().getTime()-n.getTime())/(1e3*60*60*24));return Math.max(0,30-m)}}};function M({propertyId:t,onUnlock:x}){const{data:s,setData:l,post:u,processing:d,errors:a,reset:f}=N({property_id:t,name:"",phone:"",email:""}),n=i=>{i.preventDefault(),x({name:s.name,phone:s.phone,email:s.email}),u("/property-inquiries",{onSuccess:()=>{f("name","phone","email")},onError:m=>{console.error("Form submission error:",m)}})};return e.jsxs("div",{className:"flex flex-col gap-8 p-8 bg-gradient-to-br from-ui-2 to-ui-1 border-2 border-ui-3 rounded-2xl my-6",children:[e.jsxs("div",{className:"flex flex-col gap-6 text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-4 bg-text-primary rounded-full",children:e.jsx(T,{size:32,className:"text-ui-1"})})}),e.jsx(c,{variant:"heading3",className:"text-text-primary",children:"Please add your details to unlock this property"})]}),e.jsxs("form",{onSubmit:n,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Your name *",value:s.name,onChange:i=>l("name",i.target.value),className:`px-4 py-3 border rounded-xl bg-ui-1 text-text-primary placeholder-text-secondary focus:outline-none focus:border-text-primary transition-colors ${a.name?"border-red-500":"border-ui-3"}`,required:!0}),a.name&&e.jsx(c,{variant:"bodySmall",className:"text-red-500",children:a.name}),e.jsx("input",{type:"tel",placeholder:"Your phone number *",value:s.phone,onChange:i=>l("phone",i.target.value),className:`px-4 py-3 border rounded-xl bg-ui-1 text-text-primary placeholder-text-secondary focus:outline-none focus:border-text-primary transition-colors ${a.phone?"border-red-500":"border-ui-3"}`,required:!0}),a.phone&&e.jsx(c,{variant:"bodySmall",className:"text-red-500",children:a.phone}),e.jsx("input",{type:"email",placeholder:"Your email (optional)",value:s.email,onChange:i=>l("email",i.target.value),className:`px-4 py-3 border rounded-xl bg-ui-1 text-text-primary placeholder-text-secondary focus:outline-none focus:border-text-primary transition-colors ${a.email?"border-red-500":"border-ui-3"}`}),a.email&&e.jsx(c,{variant:"bodySmall",className:"text-red-500",children:a.email})]}),e.jsx("button",{type:"submit",disabled:d||!s.name.trim()||!s.phone.trim(),className:"px-6 py-3 bg-text-primary text-ui-1 rounded-xl font-medium hover:bg-text-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all w-full flex items-center justify-center gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-ui-1 border-t-transparent"}),"Submitting..."]}):"Unlock"})]})]})}function R({property:t}){const{props:x}=_(),s=x.flash,{isUnlocked:l,saveUnlockStatus:u}=I(),{isArabic:d}=w(),{t:a}=k("pages"),f=r=>{u(r,t.id)},n=r=>{const o=a(`property_type_${r}`);return o||{sell:"For Sale",rent:"For Rent",investment:"Investment",share:"Shared Ownership"}[r]||r},i=r=>{const o=a(`property_description_${r}`);return o||r.replace("_"," ").split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" ")},m=r=>{const o=a(`property_category_${r}`);return o||r.charAt(0).toUpperCase()+r.slice(1)},g=r=>{const o=r.match(/q=([^&]+)/);return o?`https://maps.google.com/maps?q=${o[1]}&z=15&output=embed`:r},y=r=>new Date(r).toLocaleDateString(d?"ar-SA":"en-US",{year:"numeric",month:"long",day:"numeric"}),p=({label:r,value:o,isLast:h=!1,isLink:v=!1,href:j=""})=>e.jsxs("div",{className:`flex py-6 items-center justify-between ${h?"":"border-b border-ui-3"}`,children:[e.jsx(c,{variant:"bodyLarge",className:"text-text-primary",children:r}),v?e.jsx("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"text-text-secondary hover:text-text-primary transition-colors",children:o}):e.jsx(c,{variant:"bodyMedium",className:"text-text-secondary",children:o})]});return e.jsxs(U,{color:"white",section:"hero",children:[e.jsx(S,{title:`${d&&t.title_ar?t.title_ar:t.title}`}),s?.success&&e.jsx("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg",children:s.success}),s?.error&&e.jsx("div",{className:"fixed top-4 right-4 z-50 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg",children:s.error}),e.jsxs("section",{id:"hero",className:"flex flex-col gap-10 pt-24 sm:pt-32 md:pt-52 -mt-20 px-4 sm:px-6 md:px-10 pb-24 w-full max-w-6xl",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("div",{children:e.jsx(L,{href:"/properties",className:"text-text-primary",arrow:!0,children:a("go_back")||"Go Back"})})}),e.jsx(c,{variant:"heading2",className:"text-text-primary max-w-6xl",as:"h1",children:d&&t.title_ar?t.title_ar:t.title}),e.jsx("img",{src:t.images[0]||"https://placehold.co/1200x500.png?text=No+Image",alt:t.title,className:"w-full max-w-6xl h-[300px] sm:h-[400px] md:h-[500px] object-cover rounded-2xl"}),e.jsxs("div",{className:"flex flex-col lg:flex-row w-full gap-6",children:[e.jsxs("div",{className:"w-full h-fit gap-6 flex flex-col overflow-hidden",children:[e.jsx(D,{variant:"secondary",text:n(t.property_type)}),e.jsxs("div",{className:"flex gap-2.5 items-start",children:[e.jsx($,{size:20,className:"mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{variant:"bodyLarge",className:"text-text-primary",children:a("location")||"Location"}),e.jsx(c,{variant:"bodyMedium",className:"text-text-secondary mb-2",children:d&&t.property_location_ar?t.property_location_ar:t.property_location}),e.jsx("a",{href:t.property_location,target:"_blank",rel:"noopener noreferrer",className:"text-text-secondary hover:text-text-primary transition-colors",children:a("view_on_maps")||"View on Google Maps"})]})]}),t.description&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(c,{variant:"bodyLarge",className:"text-text-primary",children:a("description")||"Description"}),l?e.jsx("div",{className:"text-text-secondary prose prose-sm max-w-none [&>h2]:text-lg [&>h2]:font-semibold [&>h2]:text-text-primary [&>h2]:mt-4 [&>h2]:mb-2 [&>h3]:text-base [&>h3]:font-medium [&>h3]:text-text-primary [&>h3]:mt-3 [&>h3]:mb-2 [&>p]:mb-3 [&>ul]:mb-3 [&>ol]:mb-3 [&>li]:mb-1 [&>blockquote]:border-l-4 [&>blockquote]:border-ui-3 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-text-secondary",dangerouslySetInnerHTML:{__html:d&&t.description_ar?t.description_ar:t.description}}):e.jsxs("div",{className:"text-text-secondary prose prose-sm max-w-none relative [&>h2]:text-lg [&>h2]:font-semibold [&>h2]:text-text-primary [&>h2]:mt-4 [&>h2]:mb-2 [&>h3]:text-base [&>h3]:font-medium [&>h3]:text-text-primary [&>h3]:mt-3 [&>h3]:mb-2 [&>p]:mb-3 [&>ul]:mb-3 [&>ol]:mb-3 [&>li]:mb-1 [&>blockquote]:border-l-4 [&>blockquote]:border-ui-3 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-text-secondary",children:[e.jsx("div",{className:"max-h-24 overflow-hidden",dangerouslySetInnerHTML:{__html:(d&&t.description_ar?t.description_ar:t.description||"").substring(0,150)+"..."}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-ui-2"})]})]}),!l&&e.jsx(M,{propertyId:t.id,onUnlock:f}),l&&e.jsxs("div",{className:"flex gap-2.5 items-end",children:[e.jsx(c,{variant:"heading3",className:"text-text-primary",children:Math.round(t.price).toLocaleString("en-US")}),e.jsx(c,{variant:"bodyMedium",className:"text-text-secondary",children:d?"ر.س":"SAR"})]}),l&&e.jsx(q,{text:a("request_quote")||"Request a quote",variant:"secondary",href:"/contact"})]}),l&&e.jsxs("div",{className:"w-full h-fit gap-6 flex flex-col p-4 sm:p-6 overflow-hidden bg-ui-2 border border-ui-3 rounded-2xl",children:[e.jsx(c,{variant:"heading3",className:"text-text-primary w-full",children:a("details")||"Details"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(p,{label:a("area")||"Area",value:`${t.property_area} m²`}),e.jsx(p,{label:a("type")||"Type",value:i(t.property_description)}),e.jsx(p,{label:a("category")||"Category",value:m(t.property_category)}),e.jsx(p,{label:a("license")||"License",value:t.advertising_license_number}),t.pdf&&e.jsx(p,{label:a("documents")||"Documents",value:a("view_pdf")||"View PDF",isLink:!0,href:`/storage/${t.pdf}`}),e.jsx(p,{label:a("listed_date")||"Listed Date",value:y(t.created_at),isLast:!0})]})]})]}),l&&t.images.length>1&&e.jsxs("div",{className:"flex flex-col w-full gap-6 max-w-6xl",children:[e.jsx(c,{variant:"heading3",className:"text-text-primary",children:a("gallery")||"Gallery"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.images.slice(1).map((r,o)=>e.jsx("img",{src:r,alt:`${t.title} - Image ${o+2}`,className:"w-full h-[300px] sm:h-[400px] object-cover rounded-2xl"},o))})]}),l&&e.jsxs("div",{className:"flex flex-col w-full gap-6 max-w-6xl",children:[e.jsx(c,{variant:"heading3",className:"text-text-primary",children:a("location")||"Location"}),e.jsx("div",{className:"w-full h-[400px] rounded-2xl overflow-hidden",children:e.jsx("iframe",{src:g(t.property_location),style:{height:"100%",width:"100%",border:"0px"},className:"rounded-2xl",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:`Location of ${t.title}`})})]})]})]})}export{R as default};
