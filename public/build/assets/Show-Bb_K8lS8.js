import{r as y,u as v,c as _,j as e,f as w,b as k,H as S}from"./app-BmgxOo6Q.js";import{T as D}from"./Tag-TXixE-Hx.js";import{T as n,A as $,N as q}from"./app-layout-BGXq4UMz.js";import{r as U,a as L}from"./Star.es-DyzfTTJK.js";import{B as T}from"./Button-jvVV0wNY.js";/* empty css            */const I=()=>{const[t,u]=y.useState(!1),[i,a]=y.useState(null);y.useEffect(()=>{c()},[]);const c=()=>{try{const r=localStorage.getItem("luxuria_properties_unlocked");if(r){const h=JSON.parse(r),x=new Date(h.timestamp);Math.floor((new Date().getTime()-x.getTime())/(1e3*60*60*24))<=30?(u(!0),a(h)):(localStorage.removeItem("luxuria_properties_unlocked"),u(!1),a(null))}}catch(r){console.error("Error checking unlock status:",r),localStorage.removeItem("luxuria_properties_unlocked"),u(!1),a(null)}};return{isUnlocked:t,unlockData:i,saveUnlockStatus:(r,h)=>{const x={unlocked:!0,timestamp:new Date().toISOString(),user:{name:r.name,phone:r.phone,email:r.email||null},property_id:h};try{return localStorage.setItem("luxuria_properties_unlocked",JSON.stringify(x)),u(!0),a(x),!0}catch(m){return console.error("Error saving unlock status:",m),!1}},clearUnlockStatus:()=>{try{localStorage.removeItem("luxuria_properties_unlocked"),u(!1),a(null)}catch(r){console.error("Error clearing unlock status:",r)}},checkUnlockStatus:c,getRemainingDays:()=>{if(!i)return 0;const r=new Date(i.timestamp),x=Math.floor((new Date().getTime()-r.getTime())/(1e3*60*60*24));return Math.max(0,30-x)}}};function M({propertyId:t,onUnlock:u}){const{t:i,isRtl:a}=v("components"),{data:c,setData:d,post:s,processing:f,errors:r,reset:h}=_({property_id:t,name:"",phone:"",email:""}),x=m=>{m.preventDefault(),u({name:c.name,phone:c.phone,email:c.email}),s("/property-inquiries",{onSuccess:()=>{h("name","phone","email")},onError:b=>{console.error("Form submission error:",b)}})};return e.jsxs("div",{className:"flex flex-col gap-8 p-8 bg-gradient-to-br from-ui-2 to-ui-1 border-2 border-ui-3 rounded-2xl my-6",children:[e.jsxs("div",{className:"flex flex-col gap-6 text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-4 bg-text-primary rounded-full",children:e.jsx(U,{size:32,className:"text-ui-1"})})}),e.jsx(n,{variant:"heading3",className:`text-text-primary ${a?"text-right":"text-left"}`,children:i("paywall_title")||"Please add your details to unlock this property"})]}),e.jsxs("form",{onSubmit:x,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("input",{type:"text",placeholder:i("name_placeholder")||"Your name *",value:c.name,onChange:m=>d("name",m.target.value),className:`px-4 py-3 border rounded-xl bg-ui-1 text-text-primary placeholder-text-secondary focus:outline-none focus:border-text-primary transition-colors ${a?"text-right":"text-left"} ${r.name?"border-red-500":"border-ui-3"}`,dir:a?"rtl":"ltr",required:!0}),r.name&&e.jsx(n,{variant:"bodySmall",className:`text-red-500 ${a?"text-right":"text-left"}`,children:r.name}),e.jsx("input",{type:"tel",placeholder:i("phone_placeholder")||"Your phone number *",value:c.phone,onChange:m=>d("phone",m.target.value),className:`px-4 py-3 border rounded-xl bg-ui-1 text-text-primary placeholder-text-secondary focus:outline-none focus:border-text-primary transition-colors ${a?"text-right":"text-left"} ${r.phone?"border-red-500":"border-ui-3"}`,dir:a?"rtl":"ltr",required:!0}),r.phone&&e.jsx(n,{variant:"bodySmall",className:`text-red-500 ${a?"text-right":"text-left"}`,children:r.phone}),e.jsx("input",{type:"email",placeholder:i("email_placeholder")||"Your email (optional)",value:c.email,onChange:m=>d("email",m.target.value),className:`px-4 py-3 border rounded-xl bg-ui-1 text-text-primary placeholder-text-secondary focus:outline-none focus:border-text-primary transition-colors ${a?"text-right":"text-left"} ${r.email?"border-red-500":"border-ui-3"}`,dir:a?"rtl":"ltr"}),r.email&&e.jsx(n,{variant:"bodySmall",className:`text-red-500 ${a?"text-right":"text-left"}`,children:r.email})]}),e.jsx("button",{type:"submit",disabled:f||!c.name.trim()||!c.phone.trim(),className:"px-6 py-3 bg-text-primary text-ui-1 rounded-xl font-medium hover:bg-text-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all w-full flex items-center justify-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-ui-1 border-t-transparent"}),i("submitting")||"Submitting..."]}):i("unlock")||"Unlock"})]})]})}function F({property:t}){const{props:u}=w(),i=u.flash,{isUnlocked:a,saveUnlockStatus:c}=I(),{isArabic:d}=k(),{t:s}=v("pages"),f=l=>{c(l,t.id)},r=l=>{const o=s(`property_type_${l}`);return o||{sell:"For Sale",rent:"For Rent",investment:"Investment",share:"Shared Ownership"}[l]||l},h=l=>{const o=s(`property_description_${l}`);return o||l.replace("_"," ").split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1)).join(" ")},x=l=>{const o=s(`property_category_${l}`);return o||l.charAt(0).toUpperCase()+l.slice(1)},m=l=>{const o=l.match(/q=([^&]+)/);return o?`https://maps.google.com/maps?q=${o[1]}&z=15&output=embed`:l},b=l=>new Date(l).toLocaleDateString(d?"ar-SA":"en-US",{year:"numeric",month:"long",day:"numeric"}),p=({label:l,value:o,isLast:g=!1,isLink:j=!1,href:N=""})=>e.jsxs("div",{className:`flex py-6 items-center justify-between ${g?"":"border-b border-ui-3"}`,children:[e.jsx(n,{variant:"bodyLarge",className:"text-text-primary",children:l}),j?e.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"text-text-secondary hover:text-text-primary transition-colors",children:o}):e.jsx(n,{variant:"bodyMedium",className:"text-text-secondary",children:o})]});return e.jsxs($,{color:"white",section:"hero",children:[e.jsx(S,{title:`${d&&t.title_ar?t.title_ar:t.title}`}),i?.success&&e.jsx("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg",children:i.success}),i?.error&&e.jsx("div",{className:"fixed top-4 right-4 z-50 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg",children:i.error}),e.jsxs("section",{id:"hero",className:"flex flex-col gap-10 pt-24 sm:pt-32 md:pt-52 -mt-20 px-4 sm:px-6 md:px-10 pb-24 w-full max-w-6xl",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("div",{children:e.jsx(q,{href:"/properties",className:"text-text-primary",arrow:!0,children:s("go_back")||"Go Back"})})}),e.jsx(n,{variant:"heading2",className:"text-text-primary max-w-6xl",as:"h1",children:d&&t.title_ar?t.title_ar:t.title}),e.jsx("img",{src:t.images[0]||"https://placehold.co/1200x500.png?text=No+Image",alt:t.title,className:"w-full max-w-6xl h-[300px] sm:h-[400px] md:h-[500px] object-cover rounded-2xl"}),e.jsxs("div",{className:"flex flex-col lg:flex-row w-full gap-6",children:[e.jsxs("div",{className:"w-full h-fit gap-6 flex flex-col overflow-hidden",children:[e.jsx(D,{variant:"secondary",text:r(t.property_type)}),e.jsxs("div",{className:"flex gap-2.5 items-start",children:[e.jsx(L,{size:20,className:"mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(n,{variant:"bodyLarge",className:"text-text-primary",children:s("location")||"Location"}),e.jsx(n,{variant:"bodyMedium",className:"text-text-secondary mb-2",children:d&&t.property_location_ar?t.property_location_ar:t.property_location}),e.jsx("a",{href:t.property_location,target:"_blank",rel:"noopener noreferrer",className:"text-text-secondary hover:text-text-primary transition-colors",children:s("view_on_maps")||"View on Google Maps"})]})]}),t.description&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(n,{variant:"bodyLarge",className:"text-text-primary",children:s("description")||"Description"}),a?e.jsx("div",{className:"text-text-secondary prose prose-sm max-w-none [&>h2]:text-lg [&>h2]:font-semibold [&>h2]:text-text-primary [&>h2]:mt-4 [&>h2]:mb-2 [&>h3]:text-base [&>h3]:font-medium [&>h3]:text-text-primary [&>h3]:mt-3 [&>h3]:mb-2 [&>p]:mb-3 [&>ul]:mb-3 [&>ol]:mb-3 [&>li]:mb-1 [&>blockquote]:border-l-4 [&>blockquote]:border-ui-3 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-text-secondary",dangerouslySetInnerHTML:{__html:d&&t.description_ar?t.description_ar:t.description}}):e.jsxs("div",{className:"text-text-secondary prose prose-sm max-w-none relative [&>h2]:text-lg [&>h2]:font-semibold [&>h2]:text-text-primary [&>h2]:mt-4 [&>h2]:mb-2 [&>h3]:text-base [&>h3]:font-medium [&>h3]:text-text-primary [&>h3]:mt-3 [&>h3]:mb-2 [&>p]:mb-3 [&>ul]:mb-3 [&>ol]:mb-3 [&>li]:mb-1 [&>blockquote]:border-l-4 [&>blockquote]:border-ui-3 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-text-secondary",children:[e.jsx("div",{className:"max-h-24 overflow-hidden",dangerouslySetInnerHTML:{__html:(d&&t.description_ar?t.description_ar:t.description||"").substring(0,150)+"..."}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-ui-2"})]})]}),!a&&e.jsx(M,{propertyId:t.id,onUnlock:f}),a&&e.jsxs("div",{className:"flex gap-2.5 items-end",children:[e.jsx(n,{variant:"heading3",className:"text-text-primary",children:Math.round(t.price).toLocaleString("en-US")}),e.jsx(n,{variant:"bodyMedium",className:"text-text-secondary",children:d?"ر.س":"SAR"})]}),a&&e.jsx(T,{text:s("request_quote")||"Request a quote",variant:"secondary",href:"/contact"})]}),a&&e.jsxs("div",{className:"w-full h-fit gap-6 flex flex-col p-4 sm:p-6 overflow-hidden bg-ui-2 border border-ui-3 rounded-2xl",children:[e.jsx(n,{variant:"heading3",className:"text-text-primary w-full",children:s("details")||"Details"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(p,{label:s("area")||"Area",value:`${t.property_area} m²`}),e.jsx(p,{label:s("type")||"Type",value:h(t.property_description)}),e.jsx(p,{label:s("category")||"Category",value:x(t.property_category)}),e.jsx(p,{label:s("license")||"License",value:t.advertising_license_number}),t.pdf&&e.jsx(p,{label:s("documents")||"Documents",value:s("view_pdf")||"View PDF",isLink:!0,href:`/storage/${t.pdf}`}),e.jsx(p,{label:s("listed_date")||"Listed Date",value:b(t.created_at),isLast:!0})]})]})]}),a&&t.images.length>1&&e.jsxs("div",{className:"flex flex-col w-full gap-6 max-w-6xl",children:[e.jsx(n,{variant:"heading3",className:"text-text-primary",children:s("gallery")||"Gallery"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.images.slice(1).map((l,o)=>e.jsx("img",{src:l,alt:`${t.title} - Image ${o+2}`,className:"w-full h-[300px] sm:h-[400px] object-cover rounded-2xl"},o))})]}),a&&e.jsxs("div",{className:"flex flex-col w-full gap-6 max-w-6xl",children:[e.jsx(n,{variant:"heading3",className:"text-text-primary",children:s("location")||"Location"}),e.jsx("div",{className:"w-full h-[400px] rounded-2xl overflow-hidden",children:e.jsx("iframe",{src:m(t.property_location),style:{height:"100%",width:"100%",border:"0px"},className:"rounded-2xl",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:`Location of ${t.title}`})})]})]})]})}export{F as default};
